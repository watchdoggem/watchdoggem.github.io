<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>WATCHDOGGEM | NHP TERMINAL</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Orbitron:wght@700;900&display=swap" rel="stylesheet">
    <style>
        :root {
            --bg: #05030f;
            --accent: #c79eff;
            --glow: rgba(199, 158, 255, 0.45);
            --border: rgba(199, 158, 255, 0.35);
            --panel: rgba(199, 158, 255, 0.10);
        }

        * { margin:0; padding:0; box-sizing:border-box; cursor:crosshair; }

        body {
            background: var(--bg);
            color: var(--accent);
            font-family: 'Orbitron', sans-serif;
            min-height: 100vh;
            padding: 1.5rem;
            overflow-x: hidden;
        }

        header {
            display: flex;
            flex-wrap: wrap;
            justify-content: center;
            align-items: center;
            gap: 1.2rem;
            margin-bottom: 1.5rem;
        }

        .title {
            font-size: 3.2rem;
            font-weight: 900;
            letter-spacing: 6px;
            text-shadow: 0 0 16px var(--glow);
        }

        .search-bar { flex:1; max-width:480px; }
        #filter-input {
            width:100%;
            padding:0.8rem;
            background:rgba(0,0,0,0.6);
            border:1px solid var(--border);
            color:var(--accent);
            font-size:1.5rem;
            outline:none;
        }
        #filter-input:focus { box-shadow:0 0 12px var(--glow); }

        .x-link {
            width:56px; height:56px;
            border:2px solid var(--accent);
            border-radius:6px;
            overflow:hidden;
            transition:0.3s;
        }
        .x-link:hover { transform:scale(1.08); box-shadow:0 0 20px var(--glow); }

        /* GRID */
        .grid {
            display: grid;
            grid-template-columns: repeat(4, 1fr);
            gap:1rem;
            max-width:1400px;
            margin:0 auto;
        }

        @media (max-width:1100px) { .grid { grid-template-columns:repeat(3,1fr); } }
        @media (max-width:800px)  { .grid { grid-template-columns:repeat(2,1fr); } }
        @media (max-width:500px)  { .grid { grid-template-columns:1fr; } }

        .box {
            aspect-ratio: 1/1;
            border:2px solid var(--border);
            background:var(--panel);
            border-radius:10px;
            overflow:hidden;
            transition:0.3s;
            display:flex;
            flex-direction:column;
        }

        .box:hover,
        .box.active {
            border-color:var(--accent);
            box-shadow:0 0 30px var(--glow);
            transform:translateY(-5px);
        }

        .box-stack {
            flex:1;
            display:flex;
            align-items:center;
            justify-content:center;
            text-align:center;
            padding:0.8rem;
            font-weight:900;
            text-shadow:0 0 14px var(--glow);
            letter-spacing:1px;
            text-transform:uppercase;
            font-size: clamp(1.8rem, 5vw, 3.6rem);
        }

        .box-num   { background:rgba(0,0,0,0.15); border-bottom:1px solid var(--border); }
        .box-label { background:rgba(0,0,0,0.08); }

        /* HUD - MUCH SMALLER */
        #hud {
            position:fixed;
            top:50%; left:50%;
            transform:translate(-50%,-50%) scale(0.95);
            width:55vw;
            max-width:800px;
            background:rgba(5,3,15,0.82);
            border:2px solid var(--accent);
            border-radius:8px;
            padding:1.5rem;
            box-shadow:0 0 70px rgba(0,0,0,0.9);
            opacity:0;
            pointer-events:none;
            transition:all 0.35s;
            z-index:1000;
        }

        #hud.active {
            opacity:1;
            pointer-events:auto;
            transform:translate(-50%,-50%) scale(1);
        }

        .hud-header {
            font-size: clamp(2.2rem, 4vw, 3.2rem);
            text-align:center;
            margin-bottom:0.4rem;
            text-shadow:0 0 16px var(--glow);
            white-space:nowrap;
            overflow:hidden;
            text-overflow:ellipsis;
        }

        .hud-species {
            text-align:center;
            font-size:1.4rem;
            opacity:0.9;
            margin-bottom:1.2rem;
            border-bottom:1px dashed var(--border);
            padding-bottom:0.7rem;
            white-space:nowrap;
        }

        .hud-stats {
            display:grid;
            grid-template-columns:repeat(2,1fr);
            gap:0.8rem;
        }

        .stat-item {
            padding:1.1rem;
            border:1px solid var(--border);
            background:rgba(199,158,255,0.08);
            display:flex;
            align-items:center;
            justify-content:center;
            text-align:center;
            min-height:80px;
            border-radius:6px;
        }

        .stat-text {
            font-size: clamp(1.3rem, 2.5vw, 2.1rem);
            font-weight:900;
            text-shadow:0 0 8px var(--glow);
            text-transform:uppercase;
            line-height:1.1;
            white-space:nowrap;
            overflow:hidden;
            text-overflow:ellipsis;
            width:100%;
        }

        .hud-footer {
            display:flex;
            justify-content:space-between;
            font-size:1.1rem;
            opacity:0.9;
            margin-top:1.4rem;
            padding-top:0.9rem;
            border-top:1px dashed var(--border);
        }

        /* Beam */
        #beam-svg {
            position:fixed;
            inset:0;
            width:100vw;
            height:100vh;
            pointer-events:none;
            z-index:900;
            opacity:0;
            transition:opacity 0.5s;
        }
        .beam {
            fill:none;
            stroke:var(--accent);
            stroke-width:1.4;
            opacity:0.28;
        }

        @media (max-width:900px) {
            #hud { width:82vw; padding:1.2rem; }
            .hud-header { font-size:2.4rem; }
            .hud-stats { grid-template-columns:1fr; }
        }
    </style>
</head>
<body>

    <header>
        <div class="title">WATCHDOGGEM</div>
        <div class="search-bar">
            <input type="text" id="filter-input" placeholder="QUERY NHP DATABASE...">
        </div>
        <a href="https://x.com/watchdoggem" target="_blank" class="x-link">
            <img src="https://unavatar.io/x/watchdoggem" alt="X">
        </a>
    </header>

    <svg id="beam-svg"><polygon id="beam-poly" class="beam"/></svg>

    <div id="hud">
        <div class="hud-header">104,801 NON-HUMAN PRIMATES</div>
        <div class="hud-species">SUBJECTS: RHESUS MACAQUES | CYNOMOLGUS MACAQUES</div>

        <div class="hud-stats">
            <div class="stat-item"><div class="stat-text">FATAL ANESTHETIC OVERDOSE 100%</div></div>
            <div class="stat-item"><div class="stat-text">CLINICAL SELF-HARM 20%</div></div>
            <div class="stat-item"><div class="stat-text">SOCIAL ISOLATION 83%</div></div>
            <div class="stat-item"><div class="stat-text">DISTRESSED PACING 89%</div></div>
            <div class="stat-item"><div class="stat-text">NO PAIN RELIEF COLUMN E 12%</div></div>
            <div class="stat-item"><div class="stat-text">CAGE SEQUESTRATION 100%</div></div>
            <div class="stat-item"><div class="stat-text">CLASS A BREEDERS CAGED 31,000</div></div>
            <div class="stat-item"><div class="stat-text">CLASS B DEALERS CAGED 13,375</div></div>
            <div class="stat-item"><div class="stat-text">U.S. DOMESTIC REVENUE $800M+</div></div>
            <div class="stat-item"><div class="stat-text">TAXPAYER INFRASTRUCTURE $300M+</div></div>
        </div>

        <div class="hud-footer">
            <span>SOURCE: USDA APHIS 2024 • NIH FINANCIALS</span>
            <span>FDA REQUIRED • NIH FUNDED • USDA OVERSIGHT</span>
        </div>
    </div>

    <div class="grid">
        <!-- MAIN BOX with two stacked full sections -->
        <div class="box active" 
             onmouseenter="showHud(this)" 
             onmouseleave="handleBoxLeave(this)"
             ontouchstart="showHud(this)">
            <div class="box-num box-stack">104,801</div>
            <div class="box-label box-stack">NHP SUBJECTS</div>
        </div>

        <!-- Empty placeholders (you can copy this structure when populating) -->
        <div class="box" onmouseenter="showHud(this,false)" onmouseleave="handleBoxLeave(this)" ontouchstart="showHud(this,false)"></div>
        <div class="box" onmouseenter="showHud(this,false)" onmouseleave="handleBoxLeave(this)" ontouchstart="showHud(this,false)"></div>
        <div class="box" onmouseenter="showHud(this,false)" onmouseleave="handleBoxLeave(this)" ontouchstart="showHud(this,false)"></div>
        <div class="box" onmouseenter="showHud(this,false)" onmouseleave="handleBoxLeave(this)" ontouchstart="showHud(this,false)"></div>
        <div class="box" onmouseenter="showHud(this,false)" onmouseleave="handleBoxLeave(this)" ontouchstart="showHud(this,false)"></div>
        <div class="box" onmouseenter="showHud(this,false)" onmouseleave="handleBoxLeave(this)" ontouchstart="showHud(this,false)"></div>
        <div class="box" onmouseenter="showHud(this,false)" onmouseleave="handleBoxLeave(this)" ontouchstart="showHud(this,false)"></div>
        <div class="box" onmouseenter="showHud(this,false)" onmouseleave="handleBoxLeave(this)" ontouchstart="showHud(this,false)"></div>
        <div class="box" onmouseenter="showHud(this,false)" onmouseleave="handleBoxLeave(this)" ontouchstart="showHud(this,false)"></div>
        <div class="box" onmouseenter="showHud(this,false)" onmouseleave="handleBoxLeave(this)" ontouchstart="showHud(this,false)"></div>
        <div class="box" onmouseenter="showHud(this,false)" onmouseleave="handleBoxLeave(this)" ontouchstart="showHud(this,false)"></div>
        <div class="box" onmouseenter="showHud(this,false)" onmouseleave="handleBoxLeave(this)" ontouchstart="showHud(this,false)"></div>
    </div>

    <script>
        const hud = document.getElementById('hud');
        const beamSvg = document.getElementById('beam-svg');
        const beamPoly = document.getElementById('beam-poly');
        let active = null;

        function updateBeam() {
            if (!active) return;
            const b = active.getBoundingClientRect();
            const h = hud.getBoundingClientRect();
            beamPoly.setAttribute('points', [
                b.left,b.top, h.left,h.top, h.right,h.top,
                b.right,b.top, b.right,b.bottom, h.right,h.bottom,
                h.left,h.bottom, b.left,b.bottom
            ].join(','));
        }

        function showHud(el, hasData=true) {
            active = el;
            document.querySelectorAll('.box').forEach(b=>b.classList.remove('active'));
            el.classList.add('active');
            hud.classList.add('active');
            beamSvg.style.opacity = '1';
            updateBeam();
        }

        function handleBoxLeave(el) {
            if (active === el) {
                active = null;
                document.querySelectorAll('.box').forEach(b=>b.classList.remove('active'));
                hud.classList.remove('active');
                beamSvg.style.opacity = '0';
            }
        }

        window.addEventListener('resize', updateBeam);
        window.addEventListener('scroll', updateBeam);
        document.addEventListener('click', e=>{
            if (!e.target.closest('#hud') && !e.target.closest('.box')) {
                if (active) handleBoxLeave(active);
            }
        });
    </script>
</body>
</html>
